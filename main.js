!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t,n,r,o,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardTemplate=document.querySelector(".template__card"),this._card=this._getTemplate(),this._handleLikeCard=r,this._handleUnlikeCard=o,this._handleCardClick=i,this._likes=t.likes,this._owner=t.owner,this._userId=n,this._cardId=t._id,this._handleDeleteCard=u},(n=[{key:"_getTemplate",value:function(){return this._cardTemplate.cloneNode(!0).content.querySelector(".element__card")}},{key:"_setProperties",value:function(){var e=this;this._cardImage=this._card.querySelector(".element__image"),this._cardTitle=this._card.querySelector(".element__content-title"),this._likeButton=this._card.querySelector("element__content-like"),this._likeCounter=this._card.querySelector(".element__content-number-like"),this._likeCounter.textContent=this._likes.length,this._deleteButton=this._card.querySelector(".element__button-delete"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._likes.some((function(t){return t._id===e._userId}))&&this._likeButton.classList.toggle("element__content-like-active"),this._owner._id!==this._userId&&this._deleteButton.remove(),this._card.id="id_".concat(this._cardId)}},{key:"_handleDeleteCard",value:function(){this._card.remove()}},{key:"_changeLikeCounter",value:function(e){this._likes=e,this._likeCounter.textContent=e.length}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._likes.some((function(t){return t._id===e._userId}))?(e._handleUnlikeCard(e._cardId).then((function(t){e._changeLikeCounter(t.likes)})),e._likeButton.classList.toggle("element__content-like-active")):(e._handleLikeCard(e._cardId).then((function(t){e._changeLikeCounter(t.likes)})),e._likeButton.classList.toggle("element__content-like-active"))})),this._deleteButton.addEventListener("click",(function(){e._handleDeleteCard(e._cardId)})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._link,e._name)}))}},{key:"createCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var a=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n},(t=[{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._formElement.addEventListener("reset",(function(){e._toggleButtonState()}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add(this._config.inactiveButtonClass):this._buttonElement.classList.remove(this._config.inactiveButtonClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.classList.add(this._config.inputErrorMessageClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.inputErrorMessageClass),t.textContent=" "}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var f=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".popup__button-close"),this._handleEscapeKey=this._handleEscapeKey.bind(this)},t=[{key:"handleOpen",value:function(){this._popupElement.classList.add("popup__show"),document.addEventListener("keydown",this._handleEscapeKey)}},{key:"handleClose",value:function(){this._popupElement.classList.remove("popup__show")}},{key:"_handleEscapeKey",value:function(e){"Escape"===e.key&&this.handleClose()}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.handleClose()})),this._popupElement.addEventListener("click",(function(t){"popup popup__show"===t.target.className&&e.handleClose()}))}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function d(e,t,n){return t=b(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function _(e,t,n,r){var o=v(b(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(null,arguments)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var S=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=d(this,t,[e]))._handleFormSubmit=n,r._formElement=r._popupElement.querySelector(".form"),r._inputList=Array.from(r._formElement.querySelectorAll(".form__content-input")),r._formButton=r._popupElement.querySelector(".form__button"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,r=[{key:"_getInputValues",value:function(){var e=this;return this.formValues={},this._inputList.forEach((function(t){e.formValues[t.name]=t.value})),this.formValues}},{key:"handleOpen",value:function(e,n){this._formButton.textContent="Guardar",_(t,"handleOpen",this,3)([]),this._inputList[0].value=e||"",this._inputList[1]&&(this._inputList[1].value=n||"")}},{key:"handleClose",value:function(){_(t,"handleClose",this,3)([]),this._formElement.reset()}},{key:"setEventListeners",value:function(){var e=this;_(t,"setEventListeners",this,3)([]),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._formButton.textContent="Guardando...",e._handleFormSubmit(e._getInputValues(),(function(){return e.handleClose()}))}))}}],r&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}function j(e,t,n){return t=P(t),function(e,t){if(t&&("object"==E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,n||[],P(e).constructor):t.apply(e,n))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(null,arguments)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}var I=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j(this,t,[e]))._title=n._popupElement.querySelector(".popup__content-title"),n._image=n._popupElement.querySelector(".popup__content-image"),n.handleOpen=n.handleOpen.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,r=[{key:"handleOpen",value:function(e){var n,r,o,i=e.link,u=e.name;(n=t,r=this,"function"==typeof(o=C(P(1&3?n.prototype:n),"handleOpen",r))?function(e){return o.apply(r,e)}:o)([]),this._image.src=i,this._title.textContent=u}}],r&&k(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function B(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}function U(e,t,n){return t=V(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,n||[],V(e).constructor):t.apply(e,n))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function R(e,t,n,r){var o=D(V(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},D.apply(null,arguments)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}var N=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=U(this,t,[e]))._handleConfirmation=n,r._formElement=r._popupElement.querySelector(".popup__delete-cards"),r.cardId="",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),n=t,r=[{key:"setEventListeners",value:function(){var e=this;R(t,"setEventListeners",this,3)([]),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleConfirmation(e.cardId)}))}},{key:"handleOpen",value:function(e){this.cardId=e,R(t,"handleOpen",this,3)([])}},{key:"handleClose",value:function(){R(t,"handleClose",this,3)([])}}],r&&q(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function K(e){var t=function(e){if("object"!=G(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var M=function(){return e=function e(t){var n=t.nameSelector,r=t.jobSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._job=document.querySelector(r),this._avatar=document.querySelector(o)},(t=[{key:"getUserInfo",value:function(){return{userName:this._name.textContent,userJob:this._job.textContent,userAvatar:this._avatar.src}}},{key:"setUserInfo",value:function(e){var t=e.data;this._name.textContent=t.name,this._job.textContent=t.about,t.avatar&&(this._avatar.src=t.avatar),t.id&&(this._userId=t._id)}}])&&J(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function z(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var Q=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._rendererItems=r,this._renderer=o,this._section=document.querySelector(n)},(t=[{key:"addItem",value:function(e){this._section.append(e)}},{key:"renderItems",value:function(){var e=this;this._rendererItems.forEach((function(t){e._renderer(t)}))}}])&&H(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e){if("object"!=W(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==W(t)?t:t+""}var Z=function(){return e=function e(t){t.options,function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=baseUrl,this._headers=headers},(t=[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"removeLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editAvatarProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatarLink})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&X(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),$=document.querySelector("#form-profile"),ee=document.querySelector(".form__content-input_type_name"),te=document.querySelector(".form__content-input_type_about"),ne=document.querySelector(".profile__info-content-name"),re=document.querySelector(".profile__info-paragraph"),oe=document.querySelector(".profile__info-content-add-button"),ie=document.querySelector(".profile__avatar"),ue=document.querySelector("#popup-avatar"),ae=document.querySelector(".element"),ce=document.querySelector(".form-cards"),le=document.querySelector(".profile__button-add"),se={formSelector:".form",inputSelector:".form__content-input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__content-input_type_error",inputErrorMessageClass:"form__error-message"};ee.value=ne.textContent,te.value=re.textContent;var fe=new M({nameSelector:".profile__info-content-name",aboutSelector:".profile__info-paragraph",avatarSelector:".profile__avatar-image"}),pe=new Z({baseUrl:"https://around.nomoreparties.co/v1/web-es-cohort-17",headers:{authorization:"aca41053-935f-4980-ab7e-41af6eea4631","Content-Type":"application/json"}});pe.getUserInfo().then((function(e){fe.setUserInfo(e),pe.getInitialCards().then((function(e){var t=new Q({items:e,renderer:function(n){var o=new r(n,fe._userId,(function(e){return pe.addLike(e)}),(function(e){return pe.removeLike(e)}),he.handleOpen,(function(){_e.handleOpen(e._id)})).createCard();t.addItem(o)}},".element");t.renderItems()}))}));var ye=new S("#popup-cards",(function(e,t){pe.addCard(e).then((function(e){var n=new r(e,fe._userId,(function(e){return pe.addLike(e)}),(function(e){return pe.removeLike(e)}),he.handleOpen,(function(){_e.handleOpen(e._id)})).createCard();ae.prepend(n),ye.handleClose,t()}))}));ye.setEventListeners();var he=new I("#popup-photo");he.setEventListeners();var de=new S("#popup-profile",(function(e,t){pe.editProfile(e).then((function(e){fe.setUserInfo(e),de.handleClose(),t()}))}));de.setEventListeners();var me=new S("#popup-avatar",(function(e){pe.editAvatarProfile(e).then((function(e){fe.setUserInfo(e),me.handleClose()}))}));me.setEventListeners();var _e=new N("#popup-delete-confirmation",(function(e){pe.deleteCard(e).then((function(){_e.handleClose(),document.querySelector("#id_".concat(e)).remove()}))}));_e.setEventListeners(),oe.addEventListener("click",(function(){de.handleOpen(ne.textContent,re.textContent),new a(se,$).enableValidation()})),ie.addEventListener("click",(function(){me.handleOpen(),new a(se,ue).enableValidation()})),le.addEventListener("click",(function(){ye.handleOpen(),new a(se,ce).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWtCLFNBQUNrRyxFQUFRQyxHQUNoRWpCLEdBQUl1QixZQUFZUCxHQUFRN0ksTUFBSyxTQUFDZ0ksR0FDNUJMLEdBQVNNLFlBQVlELEdBQ3JCbUIsR0FBYTNHLGNBQ2JzRyxHQUNGLEdBQ0YsSUFDQUssR0FBYUQsb0JBRWIsSUFBTUcsR0FBcUIsSUFBSTFHLEVBQWMsaUJBQWlCLFNBQUNrRyxHQUM3RGhCLEdBQUl5QixrQkFBa0JULEdBQVE3SSxNQUFLLFNBQUNnSSxHQUNsQ0wsR0FBU00sWUFBWUQsR0FDckJxQixHQUFtQjdHLGFBQ3JCLEdBQ0YsSUFDQTZHLEdBQW1CSCxvQkFFbkIsSUFBTVYsR0FBd0IsSUFBSXpFLEVBQ2hDLDhCQUNBLFNBQUN3RixHQUNDMUIsR0FBSTJCLFdBQVdELEdBQWN2SixNQUFLLFdBQ2hDd0ksR0FBc0JoRyxjQUNUL0UsU0FBU0MsY0FBYyxPQUFEa0MsT0FBUTJKLElBQ3RDN0osUUFDUCxHQUNGLElBRUY4SSxHQUFzQlUsb0JBRXRCOUIsR0FBY3JILGlCQUFpQixTQUFTLFdBQ3RDb0osR0FBYXRGLFdBQVdxRCxHQUFZakksWUFBYWtJLEdBQWFsSSxhQUNqQyxJQUFJb0IsRUFBY0MsR0FBUXlHLEdBQ2xDMEMsa0JBQ3ZCLElBRUFwQyxHQUF1QnRILGlCQUFpQixTQUFTLFdBQy9Dc0osR0FBbUJ4RixhQUNnQixJQUFJeEQsRUFDckNDLEdBQ0FnSCxJQUV5Qm1DLGtCQUM3QixJQUVBaEMsR0FBZTFILGlCQUFpQixTQUFTLFdBQ3ZDNkksR0FBVy9FLGFBQ2dCLElBQUl4RCxFQUFjQyxHQUFRa0gsSUFDbENpQyxrQkFDckIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3Jtcy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvVXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgY2FyZERhdGEsXHJcbiAgICB1c2VySWQsXHJcbiAgICBoYW5kbGVMaWtlQ2FyZCxcclxuICAgIGhhbmRsZVVubGlrZUNhcmQsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZW1wbGF0ZV9fY2FyZFwiKTtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNhcmQgPSBoYW5kbGVMaWtlQ2FyZDtcclxuICAgIHRoaXMuX2hhbmRsZVVubGlrZUNhcmQgPSBoYW5kbGVVbmxpa2VDYXJkO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBjYXJkRGF0YS5saWtlcztcclxuICAgIHRoaXMuX293bmVyID0gY2FyZERhdGEub3duZXI7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkRGF0YS5faWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkVGVtcGxhdGVcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2NhcmRcIik7XHJcbiAgfVxyXG5cclxuICBfc2V0UHJvcGVydGllcygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19jb250ZW50LXRpdGxlXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcImVsZW1lbnRfX2NvbnRlbnQtbGlrZVwiKTtcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5lbGVtZW50X19jb250ZW50LW51bWJlci1saWtlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idXR0b24tZGVsZXRlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICBpZiAodGhpcy5fbGlrZXMuc29tZSgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuX3VzZXJJZCkpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fY29udGVudC1saWtlLWFjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLl9vd25lci5faWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9jYXJkLmlkID0gYGlkXyR7dGhpcy5fY2FyZElkfWA7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBfY2hhbmdlTGlrZUNvdW50ZXIobmV3QXJyYXlMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBuZXdBcnJheUxpa2VzO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBuZXdBcnJheUxpa2VzLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlVW5saWtlQ2FyZCh0aGlzLl9jYXJkSWQpLnRoZW4oKGNhcmRXaXRoTGlrZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fY2hhbmdlTGlrZUNvdW50ZXIoY2FyZFdpdGhMaWtlLmxpa2VzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19jb250ZW50LWxpa2UtYWN0aXZlXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKHRoaXMuX2NhcmRJZCkudGhlbigoY2FyZFdpdGhMaWtlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9jaGFuZ2VMaWtlQ291bnRlcihjYXJkV2l0aExpa2UubGlrZXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2NvbnRlbnQtbGlrZS1hY3RpdmVcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQodGhpcy5fY2FyZElkKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX3NldFByb3BlcnRpZXMoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvck1lc3NhZ2VDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yTWVzc2FnZUNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiIFwiO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fYnV0dG9uLWNsb3NlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NhcGVLZXkgPSB0aGlzLl9oYW5kbGVFc2NhcGVLZXkuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZU9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19zaG93XCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlS2V5KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fc2hvd1wiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NhcGVLZXkoZSkge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT09IFwicG9wdXAgcG9wdXBfX3Nob3dcIikge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2NvbnRlbnQtaW5wdXRcIilcclxuICAgICk7XHJcbiAgICB0aGlzLl9mb3JtQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fYnV0dG9uXCIpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLmZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5mb3JtVmFsdWVzW2lucHV0RWxlbWVudC5uYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuZm9ybVZhbHVlcztcclxuICB9XHJcbiAgaGFuZGxlT3Blbihjb250ZW50Rmlyc3RJbnB1dCwgY29udGVudFNlY29uZElucHV0KSB7XHJcbiAgICB0aGlzLl9mb3JtQnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFyXCI7XHJcbiAgICBzdXBlci5oYW5kbGVPcGVuKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3RbMF0udmFsdWUgPSBjb250ZW50Rmlyc3RJbnB1dCB8fCBcIlwiO1xyXG4gICAgaWYgKHRoaXMuX2lucHV0TGlzdFsxXSkge1xyXG4gICAgICB0aGlzLl9pbnB1dExpc3RbMV0udmFsdWUgPSBjb250ZW50U2Vjb25kSW5wdXQgfHwgXCJcIjtcclxuICAgIH1cclxuICB9XHJcbiAgaGFuZGxlQ2xvc2UoKSB7XHJcbiAgICBzdXBlci5oYW5kbGVDbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24udGV4dENvbnRlbnQgPSBcIkd1YXJkYW5kby4uLlwiO1xyXG4gICAgICBjb25zdCBjbG9zZSA9ICgpID0+IHRoaXMuaGFuZGxlQ2xvc2UoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpLCBjbG9zZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NvbnRlbnQtdGl0bGVcIik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jb250ZW50LWltYWdlXCIpO1xyXG4gICAgdGhpcy5oYW5kbGVPcGVuID0gdGhpcy5oYW5kbGVPcGVuLmJpbmQodGhpcyk7XHJcbiAgfVxyXG4gIGhhbmRsZU9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcclxuICAgIHN1cGVyLmhhbmRsZU9wZW4oKTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUNvbmZpcm1hdGlvbikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtYXRpb24gPSBoYW5kbGVDb25maXJtYXRpb247XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fZGVsZXRlLWNhcmRzXCJcclxuICAgICk7XHJcbiAgICB0aGlzLmNhcmRJZCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlQ29uZmlybWF0aW9uKHRoaXMuY2FyZElkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlT3BlbihjYXJkSWQpIHtcclxuICAgIHRoaXMuY2FyZElkID0gY2FyZElkO1xyXG4gICAgc3VwZXIuaGFuZGxlT3BlbigpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ2xvc2UoKSB7XHJcbiAgICBzdXBlci5oYW5kbGVDbG9zZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgdXNlckpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxyXG4gICAgICB1c2VyQXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjLFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8oeyBkYXRhIH0pIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xyXG4gICAgaWYgKGRhdGEuYXZhdGFyKSB7XHJcbiAgICAgIHRoaXMuX2F2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcclxuICAgIH1cclxuICAgIGlmIChkYXRhLmlkKSB7XHJcbiAgICAgIHRoaXMuX3VzZXJJZCA9IGRhdGEuX2lkO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjYXJkc1NlY3Rpb25TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXJJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX3NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRzU2VjdGlvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2VjdGlvbi5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVySXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBvcHRpb25zIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICAvLyBPYnRlbmVyIGluZm9ybWFjacOzbiBkZWwgdXN1YXJpb1xyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIE9idGVuZXIgbGFzIHRhcmpldGFzIGluaWNpYWxlc1xyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBBY3R1YWxpemFyIHBlcmZpbCBkZWwgdXN1YXJpb1xyXG4gIGVkaXRQcm9maWxlKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBBw7FhZGlyIHVuYSBudWV2YSB0YXJqZXRhXHJcbiAgYWRkQ2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgbGluazogZGF0YS5saW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gRGFyIFwibWUgZ3VzdGFcIiBhIHVuYSB0YXJqZXRhXHJcbiAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gUXVpdGFyIFwibWUgZ3VzdGFcIiBkZSB1bmEgdGFyamV0YVxyXG4gIHJlbW92ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIEVsaW1pbmFyIHVuYSB0YXJqZXRhXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwYXJhIGFjdHVhbGl6YXIgZWwgYXZhdGFyIGRlbCB1c3VhcmlvXHJcbiAgZWRpdEF2YXRhclByb2ZpbGUoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyTGluayxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm0tcHJvZmlsZVwiKTtcclxuY29uc3QgaW5wdXROYW1lVXNlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fY29udGVudC1pbnB1dF90eXBlX25hbWVcIik7XHJcbmNvbnN0IGlucHV0QWJvdXRVc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5mb3JtX19jb250ZW50LWlucHV0X3R5cGVfYWJvdXRcIlxyXG4pO1xyXG5cclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tY29udGVudC1uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tcGFyYWdyYXBoXCIpO1xyXG5jb25zdCBwcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19pbmZvLWNvbnRlbnQtYWRkLWJ1dHRvblwiXHJcbik7XHJcbmNvbnN0IHByb2ZpbGVBdmF0YXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcclxuY29uc3QgcHJvZmlsZUF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWF2YXRhclwiKTtcclxuXHJcbmNvbnN0IGNhcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpO1xyXG5cclxuY29uc3QgcG9wdXBDYXJkc0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY2FyZHNcIik7XHJcbmNvbnN0IGFkZENhcmRzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xyXG5cclxuY29uc3QgY29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2NvbnRlbnQtaW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9fY29udGVudC1pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgaW5wdXRFcnJvck1lc3NhZ2VDbGFzczogXCJmb3JtX19lcnJvci1tZXNzYWdlXCIsXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIGZvcm1Qcm9maWxlLFxyXG4gIGlucHV0TmFtZVVzZXIsXHJcbiAgaW5wdXRBYm91dFVzZXIsXHJcbiAgcHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZUFib3V0LFxyXG4gIHByb2ZpbGVCdXR0b24sXHJcbiAgcHJvZmlsZUF2YXRhckNvbnRhaW5lcixcclxuICBwcm9maWxlQXZhdGFyRm9ybSxcclxuICBjYXJkQXJlYSxcclxuICBwb3B1cENhcmRzRm9ybSxcclxuICBhZGRDYXJkc0J1dHRvbixcclxuICBjb25maWcsXHJcbn07XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3Jtcy5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgZm9ybVByb2ZpbGUsXHJcbiAgaW5wdXROYW1lVXNlcixcclxuICBpbnB1dEFib3V0VXNlcixcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlQWJvdXQsXHJcbiAgcHJvZmlsZUJ1dHRvbixcclxuICBwcm9maWxlQXZhdGFyQ29udGFpbmVyLFxyXG4gIHByb2ZpbGVBdmF0YXJGb3JtLFxyXG4gIGNhcmRBcmVhLFxyXG4gIHBvcHVwQ2FyZHNGb3JtLFxyXG4gIGFkZENhcmRzQnV0dG9uLFxyXG4gIGNvbmZpZyxcclxufSBmcm9tIFwiLi4vc2NyaXB0cy9VdGlscy5qc1wiO1xyXG5cclxuaW5wdXROYW1lVXNlci52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG5pbnB1dEFib3V0VXNlci52YWx1ZSA9IHByb2ZpbGVBYm91dC50ZXh0Q29udGVudDtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2luZm8tY29udGVudC1uYW1lXCIsXHJcbiAgYWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9faW5mby1wYXJhZ3JhcGhcIixcclxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZhdGFyLWltYWdlXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYi1lcy1jb2hvcnQtMTdcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImFjYTQxMDUzLTkzNWYtNDk4MC1hYjdlLTQxYWY2ZWVhNDYzMVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKChyZXN1bHQpID0+IHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQpO1xyXG4gIGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogcmVzdWx0LFxyXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICAgICAgICBpdGVtLFxyXG4gICAgICAgICAgICB1c2VySW5mby5fdXNlcklkLFxyXG4gICAgICAgICAgICAoY2FyZElkKSA9PiBhcGkuYWRkTGlrZShjYXJkSWQpLFxyXG4gICAgICAgICAgICAoY2FyZElkKSA9PiBhcGkucmVtb3ZlTGlrZShjYXJkSWQpLFxyXG4gICAgICAgICAgICBwb3B1cEltYWdlLmhhbmRsZU9wZW4sXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24uaGFuZGxlT3BlbihyZXN1bHQuX2lkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5jcmVhdGVDYXJkKCk7XHJcbiAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBcIi5lbGVtZW50XCJcclxuICAgICk7XHJcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwQ2FyZHMgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1jYXJkc1wiLCAoaW5wdXRzLCBvbkNsb3NlKSA9PiB7XHJcbiAgYXBpLmFkZENhcmQoaW5wdXRzKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcclxuICAgICAgcmVzdWx0LFxyXG4gICAgICB1c2VySW5mby5fdXNlcklkLFxyXG4gICAgICAoY2FyZElkKSA9PiBhcGkuYWRkTGlrZShjYXJkSWQpLFxyXG4gICAgICAoY2FyZElkKSA9PiBhcGkucmVtb3ZlTGlrZShjYXJkSWQpLFxyXG4gICAgICBwb3B1cEltYWdlLmhhbmRsZU9wZW4sXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24uaGFuZGxlT3BlbihyZXN1bHQuX2lkKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGNvbnN0IG5ld0NhcmRFbGVtZW50ID0gbmV3Q2FyZC5jcmVhdGVDYXJkKCk7XHJcbiAgICBjYXJkQXJlYS5wcmVwZW5kKG5ld0NhcmRFbGVtZW50KTtcclxuICAgIHBvcHVwQ2FyZHMuaGFuZGxlQ2xvc2U7XHJcbiAgICBvbkNsb3NlKCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5wb3B1cENhcmRzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BvcHVwLXBob3RvXCIpO1xyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1wcm9maWxlXCIsIChpbnB1dHMsIG9uQ2xvc2UpID0+IHtcclxuICBhcGkuZWRpdFByb2ZpbGUoaW5wdXRzKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdCk7XHJcbiAgICBwb3B1cFByb2ZpbGUuaGFuZGxlQ2xvc2UoKTtcclxuICAgIG9uQ2xvc2UoKTtcclxuICB9KTtcclxufSk7XHJcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBBdmF0YXJQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtYXZhdGFyXCIsIChpbnB1dHMpID0+IHtcclxuICBhcGkuZWRpdEF2YXRhclByb2ZpbGUoaW5wdXRzKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdCk7XHJcbiAgICBwb3B1cEF2YXRhclByb2ZpbGUuaGFuZGxlQ2xvc2UoKTtcclxuICB9KTtcclxufSk7XHJcbnBvcHVwQXZhdGFyUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcclxuICBcIiNwb3B1cC1kZWxldGUtY29uZmlybWF0aW9uXCIsXHJcbiAgKGNhcmRUb0RlbGV0ZSkgPT4ge1xyXG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZFRvRGVsZXRlKS50aGVuKCgpID0+IHtcclxuICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLmhhbmRsZUNsb3NlKCk7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjaWRfJHtjYXJkVG9EZWxldGV9YCk7XHJcbiAgICAgIGNhcmQucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbik7XHJcbnBvcHVwV2l0aENvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwUHJvZmlsZS5oYW5kbGVPcGVuKHByb2ZpbGVOYW1lLnRleHRDb250ZW50LCBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQpO1xyXG4gIGNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtUHJvZmlsZSk7XHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBdmF0YXJDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEF2YXRhclByb2ZpbGUuaGFuZGxlT3BlbigpO1xyXG4gIGNvbnN0IGF2YXRhclByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgICBjb25maWcsXHJcbiAgICBwcm9maWxlQXZhdGFyRm9ybVxyXG4gICk7XHJcbiAgYXZhdGFyUHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmFkZENhcmRzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBDYXJkcy5oYW5kbGVPcGVuKCk7XHJcbiAgY29uc3QgY2FyZHNGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwb3B1cENhcmRzRm9ybSk7XHJcbiAgY2FyZHNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY2FyZERhdGEiLCJ1c2VySWQiLCJoYW5kbGVMaWtlQ2FyZCIsImhhbmRsZVVubGlrZUNhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkVGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfY2FyZCIsIl9nZXRUZW1wbGF0ZSIsIl9oYW5kbGVMaWtlQ2FyZCIsIl9oYW5kbGVVbmxpa2VDYXJkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVyIiwib3duZXIiLCJfdXNlcklkIiwiX2NhcmRJZCIsIl9pZCIsIl9oYW5kbGVEZWxldGVDYXJkIiwia2V5IiwidmFsdWUiLCJjbG9uZU5vZGUiLCJjb250ZW50IiwiX3RoaXMiLCJfY2FyZEltYWdlIiwiX2NhcmRUaXRsZSIsIl9saWtlQnV0dG9uIiwiX2xpa2VDb3VudGVyIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJfZGVsZXRlQnV0dG9uIiwic3JjIiwiYWx0Iiwic29tZSIsIml0ZW0iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJpZCIsImNvbmNhdCIsIm5ld0FycmF5TGlrZXMiLCJfdGhpczIiLCJhZGRFdmVudExpc3RlbmVyIiwidGhlbiIsImNhcmRXaXRoTGlrZSIsIl9jaGFuZ2VMaWtlQ291bnRlciIsIl9zZXRQcm9wZXJ0aWVzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJhZGQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JNZXNzYWdlQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjYXBlS2V5IiwiYmluZCIsImUiLCJoYW5kbGVDbG9zZSIsInRhcmdldCIsImNsYXNzTmFtZSIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2NhbGxTdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1CdXR0b24iLCJfaW5oZXJpdHMiLCJmb3JtVmFsdWVzIiwiY29udGVudEZpcnN0SW5wdXQiLCJjb250ZW50U2Vjb25kSW5wdXQiLCJfc3VwZXJQcm9wR2V0IiwicmVzZXQiLCJfdGhpczMiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiX3RpdGxlIiwiX2ltYWdlIiwiaGFuZGxlT3BlbiIsIl9yZWYiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVDb25maXJtYXRpb24iLCJfaGFuZGxlQ29uZmlybWF0aW9uIiwiY2FyZElkIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX2pvYiIsIl9hdmF0YXIiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJ1c2VyQXZhdGFyIiwiX3JlZjIiLCJkYXRhIiwiYWJvdXQiLCJhdmF0YXIiLCJTZWN0aW9uIiwiY2FyZHNTZWN0aW9uU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVySXRlbXMiLCJfcmVuZGVyZXIiLCJfc2VjdGlvbiIsImVsZW1lbnQiLCJhcHBlbmQiLCJBcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXJMaW5rIiwiZm9ybVByb2ZpbGUiLCJpbnB1dE5hbWVVc2VyIiwiaW5wdXRBYm91dFVzZXIiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVBYm91dCIsInByb2ZpbGVCdXR0b24iLCJwcm9maWxlQXZhdGFyQ29udGFpbmVyIiwicHJvZmlsZUF2YXRhckZvcm0iLCJjYXJkQXJlYSIsInBvcHVwQ2FyZHNGb3JtIiwiYWRkQ2FyZHNCdXR0b24iLCJmb3JtU2VsZWN0b3IiLCJ1c2VySW5mbyIsImFib3V0U2VsZWN0b3IiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiZ2V0VXNlckluZm8iLCJyZXN1bHQiLCJzZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImNhcmRMaXN0IiwiY2FyZEVsZW1lbnQiLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsInBvcHVwSW1hZ2UiLCJwb3B1cFdpdGhDb25maXJtYXRpb24iLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwicG9wdXBDYXJkcyIsImlucHV0cyIsIm9uQ2xvc2UiLCJhZGRDYXJkIiwibmV3Q2FyZEVsZW1lbnQiLCJwcmVwZW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cFByb2ZpbGUiLCJlZGl0UHJvZmlsZSIsInBvcHVwQXZhdGFyUHJvZmlsZSIsImVkaXRBdmF0YXJQcm9maWxlIiwiY2FyZFRvRGVsZXRlIiwiZGVsZXRlQ2FyZCIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9