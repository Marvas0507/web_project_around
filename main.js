!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t,n,r,o,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardTemplate=document.querySelector(".template__card"),this._card=this._getTemplate(),this._handleLikeCard=r,this._handleUnlikeCard=o,this._handleCardClick=i,this._likes=t.likes,this._owner=t.owner,this._userId=n,this._cardId=t._id,this._handleDeleteCard=u},(n=[{key:"_getTemplate",value:function(){return this._cardTemplate.cloneNode(!0).content.querySelector(".card")}},{key:"_setProperties",value:function(){var e=this;this._cardImage=this._card.querySelector(".card__image"),this._cardTitle=this._card.querySelector(".card__title"),this._likeButton=this._card.querySelector(".card__icon_type_like"),this._likeCounter=this._card.querySelector(".card__like-number"),this._likeCounter.textContent=this._likes.length,this._deleteButton=this._card.querySelector(".card__icon_type_delete"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._likes.some((function(t){return t._id===e._userId}))&&this._likeButton.classList.toggle("card__icon_type_like-active"),console.log(this._owner._id,this._userId),this._owner._id!==this._userId&&this._deleteButton.remove(),this._card.id="id_".concat(this._cardId)}},{key:"_handleDeleteCard",value:function(){this._card.remove()}},{key:"_changeLikeCounter",value:function(e){this._likes=e,this._likeCounter.textContent=e.length}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._likes.some((function(t){return t._id===e._userId}))?(e._handleUnlikeCard(e._cardId).then((function(t){e._changeLikeCounter(t.likes)})),e._likeButton.classList.toggle("card__icon_type_like-active")):(e._handleLikeCard(e._cardId).then((function(t){e._changeLikeCounter(t.likes)})),e._likeButton.classList.toggle("card__icon_type_like-active"))})),this._deleteButton.addEventListener("click",(function(){e._handleDeleteCard(e._cardId)})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._link,e._name)}))}},{key:"createCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var a=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n},(t=[{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._formElement.addEventListener("reset",(function(){e._toggleButtonState()}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add(this._config.inactiveButtonClass):this._buttonElement.classList.remove(this._config.inactiveButtonClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.classList.add(this._config.inputErrorMessageClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.inputErrorMessageClass),t.textContent=" "}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var f=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".popup__button-close"),this._handleEscapeKey=this._handleEscapeKey.bind(this)},t=[{key:"handleOpen",value:function(){this._popupElement.classList.add("popup__show"),document.addEventListener("keydown",this._handleEscapeKey)}},{key:"handleClose",value:function(){this._popupElement.classList.remove("popup__show")}},{key:"_handleEscapeKey",value:function(e){"Escape"===e.key&&this.handleClose()}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.handleClose()})),this._popupElement.addEventListener("click",(function(t){"popup popup__show"===t.target.className&&e.handleClose()}))}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function h(e,t,n){return t=b(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function _(e,t,n,r){var o=v(b(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(null,arguments)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var S=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h(this,t,[e]))._handleFormSubmit=n,r._formElement=r._popupElement.querySelector(".popup__form"),r._inputList=Array.from(r._formElement.querySelectorAll(".popup__form-input")),r._formButton=r._popupElement.querySelector(".popup__form-button"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,r=[{key:"_getInputValues",value:function(){var e=this;return this.formValues={},this._inputList.forEach((function(t){e.formValues[t.name]=t.value})),this.formValues}},{key:"handleOpen",value:function(e,n){this._formButton.textContent="Guardar",_(t,"handleOpen",this,3)([]),this._inputList[0].value=e||"",this._inputList[1]&&(this._inputList[1].value=n||"")}},{key:"handleClose",value:function(){_(t,"handleClose",this,3)([]),this._formElement.reset()}},{key:"setEventListeners",value:function(){var e=this;_(t,"setEventListeners",this,3)([]),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._formButton.textContent="Guardando...",e._handleFormSubmit(e._getInputValues(),(function(){return e.handleClose()}))}))}}],r&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e){if("object"!=k(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}function j(e,t,n){return t=P(t),function(e,t){if(t&&("object"==k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,n||[],P(e).constructor):t.apply(e,n))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(null,arguments)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}var I=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j(this,t,[e]))._title=n._popupElement.querySelector(".popup__subtitle"),n._image=n._popupElement.querySelector(".popup__content-image"),n.handleOpen=n.handleOpen.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,r=[{key:"handleOpen",value:function(e){var n,r,o,i=e.link,u=e.name;(n=t,r=this,"function"==typeof(o=C(P(1&3?n.prototype:n),"handleOpen",r))?function(e){return o.apply(r,e)}:o)([]),this._image.src=i,this._title.textContent=u}}],r&&E(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function B(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}function U(e,t,n){return t=V(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,n||[],V(e).constructor):t.apply(e,n))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function R(e,t,n,r){var o=D(V(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},D.apply(null,arguments)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}var N=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=U(this,t,[e]))._handleConfirmation=n,r._formElement=r._popupElement.querySelector(".popup__form_delete-confirmation"),r.cardId="",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),n=t,r=[{key:"setEventListeners",value:function(){var e=this;R(t,"setEventListeners",this,3)([]),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleConfirmation(e.cardId)}))}},{key:"handleOpen",value:function(e){this.cardId=e,R(t,"handleOpen",this,3)([])}},{key:"handleClose",value:function(){R(t,"handleClose",this,3)([])}}],r&&q(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function K(e){var t=function(e){if("object"!=G(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var M=function(){return e=function e(t){var n=t.nameSelector,r=t.jobSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._job=document.querySelector(r),this._avatar=document.querySelector(o)},(t=[{key:"getUserInfo",value:function(){return{userName:this._name.textContent,userJob:this._job.textContent,userAvatar:this._avatar.src,id:this._userId}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._job.textContent=e.about,e.avatar&&(this._avatar.src=e.avatar),e.id&&(this._userId=e._id)}}])&&J(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function z(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var Q=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._rendererItems=r,this._renderer=o,this._section=document.querySelector(n)},(t=[{key:"addItem",value:function(e){this._section.append(e)}},{key:"renderItems",value:function(){var e=this;this._rendererItems.forEach((function(t){e._renderer(t)}))}}])&&H(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e){if("object"!=W(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==W(t)?t:t+""}var Z=function(){return e=function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r},(t=[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"removeLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editAvatarProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatarLink})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&X(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),$=document.querySelector(".popup__form_profile"),ee=document.querySelector(".popup__form-input_type_name"),te=document.querySelector(".popup__form-input_type_about"),ne=document.querySelector(".profile__name"),re=document.querySelector(".profile__about"),oe=document.querySelector(".profile__edit-button"),ie=document.querySelector(".profile__avatar-cointainer"),ue=document.querySelector(".popup__form_avatar-profile"),ae=document.querySelector(".cards"),ce=document.querySelector(".popup__form_cards"),le=document.querySelector(".profile__add-button"),se={formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__form-button",inactiveButtonClass:"popup__form-button_disabled",inputErrorClass:"popup__form-input_type_error",inputErrorMessageClass:"popup__form-error-message"};ee.value=ne.textContent,te.value=re.textContent;var fe=new M({nameSelector:".profile__name",jobSelector:".profile__about",avatarSelector:".profile__image"}),pe=new Z({baseUrl:"https://around.nomoreparties.co/v1/web-es-cohort-17",headers:{authorization:"aca41053-935f-4980-ab7e-41af6eea4631","Content-Type":"application/json"}});pe.getUserInfo().then((function(e){fe.setUserInfo(e),pe.getInitialCards().then((function(t){var n=new Q({items:t,renderer:function(t){var o=new r(t,e._id,(function(e){return pe.addLike(e)}),(function(e){return pe.removeLike(e)}),(function(){de.handleOpen({link:t.link,name:t.name})}),(function(){_e.handleOpen(t._id)})).createCard();n.addItem(o)}},".cards");n.renderItems()}))}));var ye=new S("#popup-cards",(function(e,t){pe.addCard(e).then((function(n){var o=new r(n,fe.getUserInfo().id,(function(e){return pe.addLike(e)}),(function(e){return pe.removeLike(e)}),(function(){return de.handleOpen(e)}),(function(){_e.handleOpen(n._id)})).createCard();ae.prepend(o),ye.handleClose,t()}))}));ye.setEventListeners();var de=new I("#popup-photo");de.setEventListeners();var he=new S("#popup-profile",(function(e,t){pe.editProfile(e).then((function(e){fe.setUserInfo(e),he.handleClose(),t()}))}));he.setEventListeners();var me=new S("#popup-avatar-profile",(function(e){pe.editAvatarProfile(e).then((function(e){fe.setUserInfo(e),me.handleClose()}))}));me.setEventListeners();var _e=new N("#popup-delete-confirmation",(function(e){pe.deleteCard(e).then((function(){_e.handleClose(),document.querySelector("#id_".concat(e)).remove()}))}));_e.setEventListeners(),oe.addEventListener("click",(function(){he.handleOpen(ne.textContent,re.textContent),new a(se,$).enableValidation()})),ie.addEventListener("click",(function(){me.handleOpen(),new a(se,ue).enableValidation()})),le.addEventListener("click",(function(){ye.handleOpen(),new a(se,ce).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybXMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL1V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGNhcmREYXRhLFxyXG4gICAgdXNlcklkLFxyXG4gICAgaGFuZGxlTGlrZUNhcmQsXHJcbiAgICBoYW5kbGVVbmxpa2VDYXJkLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZFxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVtcGxhdGVfX2NhcmRcIik7XHJcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gaGFuZGxlTGlrZUNhcmQ7XHJcbiAgICB0aGlzLl9oYW5kbGVVbmxpa2VDYXJkID0gaGFuZGxlVW5saWtlQ2FyZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2xpa2VzID0gY2FyZERhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9vd25lciA9IGNhcmREYXRhLm93bmVyO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZERhdGEuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcclxuICB9XHJcblxyXG4gIF9zZXRQcm9wZXJ0aWVzKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pY29uX3R5cGVfbGlrZVwiKTtcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtbnVtYmVyXCIpO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faWNvbl90eXBlX2RlbGV0ZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2ljb25fdHlwZV9saWtlLWFjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHRoaXMuX293bmVyLl9pZCwgdGhpcy5fdXNlcklkKTtcclxuICAgIGlmICh0aGlzLl9vd25lci5faWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9jYXJkLmlkID0gYGlkXyR7dGhpcy5fY2FyZElkfWA7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBfY2hhbmdlTGlrZUNvdW50ZXIobmV3QXJyYXlMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBuZXdBcnJheUxpa2VzO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBuZXdBcnJheUxpa2VzLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlVW5saWtlQ2FyZCh0aGlzLl9jYXJkSWQpLnRoZW4oKGNhcmRXaXRoTGlrZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fY2hhbmdlTGlrZUNvdW50ZXIoY2FyZFdpdGhMaWtlLmxpa2VzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19pY29uX3R5cGVfbGlrZS1hY3RpdmVcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNhcmQodGhpcy5fY2FyZElkKS50aGVuKChjYXJkV2l0aExpa2UpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2NoYW5nZUxpa2VDb3VudGVyKGNhcmRXaXRoTGlrZS5saWtlcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9faWNvbl90eXBlX2xpa2UtYWN0aXZlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2NhcmRJZCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9zZXRQcm9wZXJ0aWVzKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JNZXNzYWdlQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvck1lc3NhZ2VDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIiBcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXBfX2J1dHRvbi1jbG9zZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjYXBlS2V5ID0gdGhpcy5faGFuZGxlRXNjYXBlS2V5LmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVPcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9fc2hvd1wiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUtleSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX3Nob3dcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlS2V5KGUpIHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmhhbmRsZUNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09PSBcInBvcHVwIHBvcHVwX19zaG93XCIpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZUNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19mb3JtLWlucHV0XCIpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZm9ybUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWJ1dHRvblwiKTtcclxuICB9XHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZm9ybVZhbHVlc1tpbnB1dEVsZW1lbnQubmFtZV0gPSBpbnB1dEVsZW1lbnQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLmZvcm1WYWx1ZXM7XHJcbiAgfVxyXG4gIGhhbmRsZU9wZW4oY29udGVudEZpcnN0SW5wdXQsIGNvbnRlbnRTZWNvbmRJbnB1dCkge1xyXG4gICAgdGhpcy5fZm9ybUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xyXG4gICAgc3VwZXIuaGFuZGxlT3BlbigpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0WzBdLnZhbHVlID0gY29udGVudEZpcnN0SW5wdXQgfHwgXCJcIjtcclxuICAgIGlmICh0aGlzLl9pbnB1dExpc3RbMV0pIHtcclxuICAgICAgdGhpcy5faW5wdXRMaXN0WzFdLnZhbHVlID0gY29udGVudFNlY29uZElucHV0IHx8IFwiXCI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGhhbmRsZUNsb3NlKCkge1xyXG4gICAgc3VwZXIuaGFuZGxlQ2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9mb3JtQnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFuZG8uLi5cIjtcclxuICAgICAgY29uc3QgY2xvc2UgPSAoKSA9PiB0aGlzLmhhbmRsZUNsb3NlKCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSwgY2xvc2UpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJ0aXRsZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NvbnRlbnQtaW1hZ2VcIik7XHJcbiAgICB0aGlzLmhhbmRsZU9wZW4gPSB0aGlzLmhhbmRsZU9wZW4uYmluZCh0aGlzKTtcclxuICB9XHJcbiAgaGFuZGxlT3Blbih7IGxpbmssIG5hbWUgfSkge1xyXG4gICAgc3VwZXIuaGFuZGxlT3BlbigpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlQ29uZmlybWF0aW9uKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1hdGlvbiA9IGhhbmRsZUNvbmZpcm1hdGlvbjtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLnBvcHVwX19mb3JtX2RlbGV0ZS1jb25maXJtYXRpb25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuY2FyZElkID0gXCJcIjtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVDb25maXJtYXRpb24odGhpcy5jYXJkSWQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVPcGVuKGNhcmRJZCkge1xyXG4gICAgdGhpcy5jYXJkSWQgPSBjYXJkSWQ7XHJcbiAgICBzdXBlci5oYW5kbGVPcGVuKCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDbG9zZSgpIHtcclxuICAgIHN1cGVyLmhhbmRsZUNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJOYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICB1c2VySm9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnQsXHJcbiAgICAgIHVzZXJBdmF0YXI6IHRoaXMuX2F2YXRhci5zcmMsXHJcbiAgICAgIGlkOiB0aGlzLl91c2VySWQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICAgIGlmIChkYXRhLmF2YXRhcikge1xyXG4gICAgICB0aGlzLl9hdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YS5pZCkge1xyXG4gICAgICB0aGlzLl91c2VySWQgPSBkYXRhLl9pZDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZHNTZWN0aW9uU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVySXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9zZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkc1NlY3Rpb25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NlY3Rpb24uYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlckl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgLy8gT2J0ZW5lciBpbmZvcm1hY2nDs24gZGVsIHVzdWFyaW9cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBPYnRlbmVyIGxhcyB0YXJqZXRhcyBpbmljaWFsZXNcclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQWN0dWFsaXphciBwZXJmaWwgZGVsIHVzdWFyaW9cclxuICBlZGl0UHJvZmlsZShkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQcOxYWRpciB1bmEgbnVldmEgdGFyamV0YVxyXG4gIGFkZENhcmQoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGxpbms6IGRhdGEubGluayxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIERhciBcIm1lIGd1c3RhXCIgYSB1bmEgdGFyamV0YVxyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFF1aXRhciBcIm1lIGd1c3RhXCIgZGUgdW5hIHRhcmpldGFcclxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBFbGltaW5hciB1bmEgdGFyamV0YVxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIE3DqXRvZG8gcGFyYSBhY3R1YWxpemFyIGVsIGF2YXRhciBkZWwgdXN1YXJpb1xyXG4gIGVkaXRBdmF0YXJQcm9maWxlKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhckxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IHBvcHVwUHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX3Byb2ZpbGVcIik7XHJcbmNvbnN0IGlucHV0TmFtZVVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWlucHV0X3R5cGVfbmFtZVwiKTtcclxuY29uc3QgaW5wdXRBYm91dFVzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWlucHV0X3R5cGVfYWJvdXRcIik7XHJcblxyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZUFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hYm91dFwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19hdmF0YXItY29pbnRhaW5lclwiXHJcbik7XHJcbmNvbnN0IHByb2ZpbGVBdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV9hdmF0YXItcHJvZmlsZVwiKTtcclxuXHJcbmNvbnN0IGNhcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc1wiKTtcclxuXHJcbmNvbnN0IHBvcHVwQ2FyZHNGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV9jYXJkc1wiKTtcclxuY29uc3QgYWRkQ2FyZHNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2Zvcm0tYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19mb3JtLWlucHV0X3R5cGVfZXJyb3JcIixcclxuICBpbnB1dEVycm9yTWVzc2FnZUNsYXNzOiBcInBvcHVwX19mb3JtLWVycm9yLW1lc3NhZ2VcIixcclxufTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgcG9wdXBQcm9maWxlRm9ybSxcclxuICBpbnB1dE5hbWVVc2VyLFxyXG4gIGlucHV0QWJvdXRVc2VyLFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVBYm91dCxcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBwcm9maWxlQXZhdGFyQ29udGFpbmVyLFxyXG4gIHByb2ZpbGVBdmF0YXJGb3JtLFxyXG4gIGNhcmRBcmVhLFxyXG4gIHBvcHVwQ2FyZHNGb3JtLFxyXG4gIGFkZENhcmRzQnV0dG9uLFxyXG4gIGNvbmZpZyxcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1zLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBwb3B1cFByb2ZpbGVGb3JtLFxyXG4gIGlucHV0TmFtZVVzZXIsXHJcbiAgaW5wdXRBYm91dFVzZXIsXHJcbiAgcHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZUFib3V0LFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIHByb2ZpbGVBdmF0YXJDb250YWluZXIsXHJcbiAgcHJvZmlsZUF2YXRhckZvcm0sXHJcbiAgY2FyZEFyZWEsXHJcbiAgcG9wdXBDYXJkc0Zvcm0sXHJcbiAgYWRkQ2FyZHNCdXR0b24sXHJcbiAgY29uZmlnLFxyXG59IGZyb20gXCIuLi9zY3JpcHRzL1V0aWxzLmpzXCI7XHJcblxyXG5pbnB1dE5hbWVVc2VyLnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XHJcbmlucHV0QWJvdXRVc2VyLnZhbHVlID0gcHJvZmlsZUFib3V0LnRleHRDb250ZW50O1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19hYm91dFwiLFxyXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWItZXMtY29ob3J0LTE3XCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJhY2E0MTA1My05MzVmLTQ5ODAtYWI3ZS00MWFmNmVlYTQ2MzFcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuYXBpLmdldFVzZXJJbmZvKCkudGhlbigodXNlcikgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXIpO1xyXG4gIGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogcmVzdWx0LFxyXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICAgICAgICBpdGVtLFxyXG4gICAgICAgICAgICB1c2VyLl9pZCxcclxuICAgICAgICAgICAgKGNhcmRJZCkgPT4gYXBpLmFkZExpa2UoY2FyZElkKSxcclxuICAgICAgICAgICAgKGNhcmRJZCkgPT4gYXBpLnJlbW92ZUxpa2UoY2FyZElkKSxcclxuICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHBvcHVwSW1hZ2UuaGFuZGxlT3Blbih7IGxpbms6IGl0ZW0ubGluaywgbmFtZTogaXRlbS5uYW1lIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLmhhbmRsZU9wZW4oaXRlbS5faWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmNyZWF0ZUNhcmQoKTtcclxuICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIFwiLmNhcmRzXCJcclxuICAgICk7XHJcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwQ2FyZHMgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1jYXJkc1wiLCAoaW5wdXRzLCBvbkNsb3NlKSA9PiB7XHJcbiAgYXBpLmFkZENhcmQoaW5wdXRzKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcclxuICAgICAgcmVzdWx0LFxyXG4gICAgICB1c2VySW5mby5nZXRVc2VySW5mbygpLmlkLFxyXG4gICAgICAoY2FyZElkKSA9PiBhcGkuYWRkTGlrZShjYXJkSWQpLFxyXG4gICAgICAoY2FyZElkKSA9PiBhcGkucmVtb3ZlTGlrZShjYXJkSWQpLFxyXG4gICAgICAoKSA9PiBwb3B1cEltYWdlLmhhbmRsZU9wZW4oaW5wdXRzKSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwV2l0aENvbmZpcm1hdGlvbi5oYW5kbGVPcGVuKHJlc3VsdC5faWQpO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgY29uc3QgbmV3Q2FyZEVsZW1lbnQgPSBuZXdDYXJkLmNyZWF0ZUNhcmQoKTtcclxuICAgIGNhcmRBcmVhLnByZXBlbmQobmV3Q2FyZEVsZW1lbnQpO1xyXG4gICAgcG9wdXBDYXJkcy5oYW5kbGVDbG9zZTtcclxuICAgIG9uQ2xvc2UoKTtcclxuICB9KTtcclxufSk7XHJcbnBvcHVwQ2FyZHMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcG9wdXAtcGhvdG9cIik7XHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3BvcHVwLXByb2ZpbGVcIiwgKGlucHV0cywgb25DbG9zZSkgPT4ge1xyXG4gIGFwaS5lZGl0UHJvZmlsZShpbnB1dHMpLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcclxuICAgIHBvcHVwUHJvZmlsZS5oYW5kbGVDbG9zZSgpO1xyXG4gICAgb25DbG9zZSgpO1xyXG4gIH0pO1xyXG59KTtcclxucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cEF2YXRhclByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwb3B1cC1hdmF0YXItcHJvZmlsZVwiLFxyXG4gIChpbnB1dHMpID0+IHtcclxuICAgIGFwaS5lZGl0QXZhdGFyUHJvZmlsZShpbnB1dHMpLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQpO1xyXG4gICAgICBwb3B1cEF2YXRhclByb2ZpbGUuaGFuZGxlQ2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuKTtcclxucG9wdXBBdmF0YXJQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxyXG4gIFwiI3BvcHVwLWRlbGV0ZS1jb25maXJtYXRpb25cIixcclxuICAoY2FyZFRvRGVsZXRlKSA9PiB7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkVG9EZWxldGUpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24uaGFuZGxlQ2xvc2UoKTtcclxuICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNpZF8ke2NhcmRUb0RlbGV0ZX1gKTtcclxuICAgICAgY2FyZC5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuKTtcclxucG9wdXBXaXRoQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwUHJvZmlsZS5oYW5kbGVPcGVuKHByb2ZpbGVOYW1lLnRleHRDb250ZW50LCBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQpO1xyXG4gIGNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwb3B1cFByb2ZpbGVGb3JtKTtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUF2YXRhckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwQXZhdGFyUHJvZmlsZS5oYW5kbGVPcGVuKCk7XHJcbiAgY29uc3QgYXZhdGFyUHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICAgIGNvbmZpZyxcclxuICAgIHByb2ZpbGVBdmF0YXJGb3JtXHJcbiAgKTtcclxuICBhdmF0YXJQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuYWRkQ2FyZHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cENhcmRzLmhhbmRsZU9wZW4oKTtcclxuICBjb25zdCBjYXJkc0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHBvcHVwQ2FyZHNGb3JtKTtcclxuICBjYXJkc0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59KTtcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjYXJkRGF0YSIsInVzZXJJZCIsImhhbmRsZUxpa2VDYXJkIiwiaGFuZGxlVW5saWtlQ2FyZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNhcmQiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9jYXJkIiwiX2dldFRlbXBsYXRlIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2hhbmRsZVVubGlrZUNhcmQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXIiLCJvd25lciIsIl91c2VySWQiLCJfY2FyZElkIiwiX2lkIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJrZXkiLCJ2YWx1ZSIsImNsb25lTm9kZSIsImNvbnRlbnQiLCJfdGhpcyIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2xpa2VCdXR0b24iLCJfbGlrZUNvdW50ZXIiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl9kZWxldGVCdXR0b24iLCJzcmMiLCJhbHQiLCJzb21lIiwiaXRlbSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmUiLCJpZCIsImNvbmNhdCIsIm5ld0FycmF5TGlrZXMiLCJfdGhpczIiLCJhZGRFdmVudExpc3RlbmVyIiwidGhlbiIsImNhcmRXaXRoTGlrZSIsIl9jaGFuZ2VMaWtlQ291bnRlciIsIl9zZXRQcm9wZXJ0aWVzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJhZGQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JNZXNzYWdlQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjYXBlS2V5IiwiYmluZCIsImUiLCJoYW5kbGVDbG9zZSIsInRhcmdldCIsImNsYXNzTmFtZSIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2NhbGxTdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1CdXR0b24iLCJfaW5oZXJpdHMiLCJmb3JtVmFsdWVzIiwiY29udGVudEZpcnN0SW5wdXQiLCJjb250ZW50U2Vjb25kSW5wdXQiLCJfc3VwZXJQcm9wR2V0IiwicmVzZXQiLCJfdGhpczMiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiX3RpdGxlIiwiX2ltYWdlIiwiaGFuZGxlT3BlbiIsIl9yZWYiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVDb25maXJtYXRpb24iLCJfaGFuZGxlQ29uZmlybWF0aW9uIiwiY2FyZElkIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX2pvYiIsIl9hdmF0YXIiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJ1c2VyQXZhdGFyIiwiZGF0YSIsImFib3V0IiwiYXZhdGFyIiwiU2VjdGlvbiIsImNhcmRzU2VjdGlvblNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlckl0ZW1zIiwiX3JlbmRlcmVyIiwiX3NlY3Rpb24iLCJlbGVtZW50IiwiYXBwZW5kIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhckxpbmsiLCJwb3B1cFByb2ZpbGVGb3JtIiwiaW5wdXROYW1lVXNlciIsImlucHV0QWJvdXRVc2VyIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlQWJvdXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBdmF0YXJDb250YWluZXIiLCJwcm9maWxlQXZhdGFyRm9ybSIsImNhcmRBcmVhIiwicG9wdXBDYXJkc0Zvcm0iLCJhZGRDYXJkc0J1dHRvbiIsImZvcm1TZWxlY3RvciIsInVzZXJJbmZvIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImdldFVzZXJJbmZvIiwidXNlciIsInNldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwicmVzdWx0IiwiY2FyZExpc3QiLCJjYXJkRWxlbWVudCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwicG9wdXBJbWFnZSIsInBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJwb3B1cENhcmRzIiwiaW5wdXRzIiwib25DbG9zZSIsImFkZENhcmQiLCJuZXdDYXJkRWxlbWVudCIsInByZXBlbmQiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwUHJvZmlsZSIsImVkaXRQcm9maWxlIiwicG9wdXBBdmF0YXJQcm9maWxlIiwiZWRpdEF2YXRhclByb2ZpbGUiLCJjYXJkVG9EZWxldGUiLCJkZWxldGVDYXJkIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=