!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=document.querySelector(".template__card"),o=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._link=n,this._card=this._getTemplate(),this.handleImageClick=r},(n=[{key:"_getTemplate",value:function(){return r.cloneNode(!0).content.querySelector(".element__card")}},{key:"_setProperties",value:function(){this._cardImage=this._card.querySelector(".element__image"),this._cardTitle=this._card.querySelector(".element__content-title"),this._likeButton=this._card.querySelector("#like"),this._deleteButton=this._card.querySelector(".element__button-delete"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name}},{key:"_handlelikeCard",value:function(){this._likeButton.classList.toggle("element__content-like-active")}},{key:"_handleDeleteCard",value:function(){this._card.remove()}},{key:"_setEventListeners",value:function(){var t=this;this._likeButton.addEventListener("click",(function(){t._handlelikeCard()})),this._deleteButton.addEventListener("click",(function(){t._handleDeleteCard()})),this._cardImage.addEventListener("click",(function(){t.handleImageClick()}))}},{key:"createCard",value:function(){return this._setProperties(),this._setEventListeners(),this._card}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function c(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var l=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=n,console.log(e),console.log(n)},(e=[{key:"_setEventListeners",value:function(){var t=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add(this._config.inactiveButtonClass):this._buttonElement.classList.remove(this._config.inactiveButtonClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._config.inputErrorClass),n.classList.add(this._config.inputErrorMessageClass),n.textContent=e}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._config.inputErrorClass),e.classList.remove(this._config.inputErrorMessageClass),e.textContent=" "}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function f(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}var p=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closeButton=this._popupElement.querySelector(".popup__button-close")},e=[{key:"open",value:function(){this._popupElement.classList.add("popup__show"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup__show")}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._closeButton.addEventListener("click",(function(){t.close()})),this._popupElement.addEventListener("click",(function(e){"popup popup__show"===e.target.className&&t.close()}))}}],e&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function v(t){var e=function(t){if("object"!=y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}function _(t,e,n){return e=g(e),function(t,e){if(e&&("object"==y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,d()?Reflect.construct(e,n||[],g(t).constructor):e.apply(t,n))}function d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(d=function(){return!!t})()}function b(t,e,n,r){var o=h(g(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},h.apply(null,arguments)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}var S=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=_(this,e,[t]))._handleFormSubmit=n,r._formElement=r._popupElement.querySelector(".form"),r._inputList=Array.from(r._formElement.querySelectorAll(".form__content-input")),r._formButton=r._popupElement.querySelector(".form__button"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(e,t),n=e,r=[{key:"_getInputValues",value:function(){var t=this;return this.formValues={},this._inputList.forEach((function(e){t.formValues[e.name]=e.value})),this.formValues}},{key:"close",value:function(){b(e,"close",this,3)([]),this._formElement.reset()}},{key:"setEventListeners",value:function(){var t=this;b(e,"setEventListeners",this,3)([]),this._formElement.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues()),t.close()}))}}],r&&m(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(p);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t){if("object"!=w(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}function j(t,e,n){return e=C(e),function(t,e){if(e&&("object"==w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,P()?Reflect.construct(e,n||[],C(t).constructor):e.apply(t,n))}function P(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(P=function(){return!!t})()}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},L.apply(null,arguments)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}var B=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=j(this,e,[t]))._title=n._popupElement.querySelector(".popup__content-title"),n._image=n._popupElement.querySelector(".popup__content-image"),n.open=n.open.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(e,t),n=e,r=[{key:"open",value:function(t){var n,r,o,i=t.link,u=t.name;(n=e,r=this,"function"==typeof(o=L(C(1&3?n.prototype:n),"open",r))?function(t){return o.apply(r,t)}:o)([]),this._image.src=i,this._title.textContent=u}}],r&&k(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(p),I=document.querySelector("#form-profile"),T=document.querySelector("#form-button-close"),R=document.querySelector(".profile__info-content-name"),V=document.querySelector(".profile__info-paragraph"),x=document.querySelector(".profile__info-content-add-button"),D=document.querySelector(".element"),A=document.querySelector("#form-cards"),M=document.querySelector(".profile__button-add"),F=document.querySelector("#card-button-close"),N=document.querySelector("#popup-photo-close");fetch("https://around-api.es.tripleten-services.com/v1/cards/",{headers:{authorization:"aca41053-935f-4980-ab7e-41af6eea4631"}});var z=new S("#popup-profile",(function(t){R.textContent=t.name,V.textContent=t.about}));z.setEventListeners();var G=new S("#popup-cards",(function(t){var e=new o(t.title,t.link,(function(){H.open({name:t.title,link:t.link})})).createCard();D.prepend(e)}));G.setEventListeners();var H=new B("#popup-photo");x.addEventListener("click",(function(){z.open()})),M.addEventListener("click",(function(){G.open()})),T.addEventListener("click",(function(){z.close()})),F.addEventListener("click",(function(){G.close()})),N.addEventListener("click",(function(){G.close()})),H.setEventListeners();var J={formSelector:".form",inputSelector:".form__content-input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__content-input_type_error",inputErrorMessageClass:"form__error-message"};new l(J,I).enableValidation(),new l(J,A).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxNQUFNLHlEQUF5RCxDQUMzREMsUUFBUyxDQUNMQyxjQUFlLDBDQUl2QixJQVlNQyxFQUFlLElBQUlqQyxFQUFlLGtCQUFrQixTQUFDa0MsR0FDdkRaLEVBQVk1RSxZQUFjd0YsRUFBTzFHLEtBQ2pDK0YsRUFBYTdFLFlBQWN3RixFQUFPQyxLQUN0QyxJQUVBRixFQUFhRyxvQkFFYixJQUFNQyxFQUFhLElBQUlyQyxFQUFlLGdCQUFnQixTQUFDa0MsR0FDbkQsSUFBTUksRUFBYyxJQUFJL0csRUFBSzJHLEVBQU9LLE1BQU9MLEVBQU96RyxNQUFNLFdBQU8rRyxFQUFXdEIsS0FBSyxDQUFFMUYsS0FBTTBHLEVBQU9LLE1BQU85RyxLQUFNeUcsRUFBT3pHLE1BQVEsSUFBR2dILGFBQzdIaEIsRUFBU2lCLFFBQVFKLEVBQ3JCLElBRUFELEVBQVdELG9CQUVYLElBQU1JLEVBQWEsSUFBSXpCLEVBQWdCLGdCQUV2Q1MsRUFBY3hFLGlCQUFpQixTQUFTLFdBQ3BDaUYsRUFBYWYsTUFDakIsSUFFQVMsRUFBVzNFLGlCQUFpQixTQUFTLFdBQ2pDcUYsRUFBV25CLE1BQ2YsSUFFQUcsRUFBVXJFLGlCQUFpQixTQUFTLFdBQ2hDaUYsRUFBYXBDLE9BQ2pCLElBRUErQixFQUFVNUUsaUJBQWlCLFNBQVMsV0FDaENxRixFQUFXeEMsT0FDZixJQUVBZ0MsRUFBc0I3RSxpQkFBaUIsU0FBUyxXQUM1Q3FGLEVBQVd4QyxPQUNmLElBRUEyQyxFQUFXSixvQkFFWCxJQUFNOUUsRUFBUyxDQUNYcUYsYUFBYyxRQUNkM0UsY0FBZSx1QkFDZkUscUJBQXNCLGdCQUN0Qk8sb0JBQXFCLHdCQUNyQlEsZ0JBQWlCLGlDQUNqQkMsdUJBQXdCLHVCQUdDLElBQUk3QixFQUFjQyxFQUFROEQsR0FDbEN3QixtQkFDTSxJQUFJdkYsRUFBY0MsRUFBUW9FLEdBQ2xDa0Isa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybXMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZW1wbGF0ZV9fY2FyZFwiKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgbGluaywgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2NhcmRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldFByb3BlcnRpZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19jb250ZW50LXRpdGxlXCIpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIjbGlrZVwiKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fYnV0dG9uLWRlbGV0ZVwiKTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVsaWtlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19jb250ZW50LWxpa2UtYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlbGlrZUNhcmQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUltYWdlQ2xpY2soKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX3NldFByb3BlcnRpZXMoKTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbmNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICBjb25zb2xlLmxvZyhjb25maWcpO1xyXG4gIGNvbnNvbGUubG9nKGZvcm1FbGVtZW50KTtcclxufVxyXG5cclxuX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICk7XHJcbiAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICApO1xyXG4gIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbl90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG59XHJcblxyXG5faGFzSW52YWxpZElucHV0KCkge1xyXG4gIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICB9KTtcclxufVxyXG5cclxuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JNZXNzYWdlQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxufVxyXG5cclxuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICApO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yTWVzc2FnZUNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIiBcIjtcclxufVxyXG5cclxuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG59XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgICBcIi5wb3B1cF9fYnV0dG9uLWNsb3NlXCJcclxuICAgICAgICAgICk7ICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX19zaG93XCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSAoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fc2hvd1wiKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09PSBcInBvcHVwIHBvcHVwX19zaG93XCIpIHtcclxuICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyAgXHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7ICAgICBcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIilcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9fY29udGVudC1pbnB1dFwiKSk7XHJcbiAgICAgICAgdGhpcy5fZm9ybUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKVxyXG4gICAgfVxyXG4gICAgX2dldElucHV0VmFsdWVzICgpe1xyXG4gICAgICAgIHRoaXMuZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTsgICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtVmFsdWVzO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKXtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pOyAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NvbnRlbnQtdGl0bGVcIik7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY29udGVudC1pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcclxuICAgIH1cclxuICAgIG9wZW4oe2xpbmssIG5hbWV9KSB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLnNyYyA9bGluaztcclxuICAgICAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1zLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5cclxuY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm0tcHJvZmlsZVwiKTtcclxuY29uc3QgZm9ybUNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtLWJ1dHRvbi1jbG9zZVwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tY29udGVudC1uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tcGFyYWdyYXBoXCIpO1xyXG5jb25zdCBwcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLWNvbnRlbnQtYWRkLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIk1vbnRhw7FhcyBDYWx2YXNcIixcclxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCJcclxuICAgIH1cclxuXTtcclxuXHJcbmNvbnN0IGNhcmRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpO1xyXG5jb25zdCBmb3JtQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybS1jYXJkc1wiKTtcclxuY29uc3QgY2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZFwiKTtcclxuY29uc3QgY2FyZENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWJ1dHRvbi1jbG9zZVwiKTtcclxuY29uc3QgYnV0dG9uQ2xvc2VQb3B1cFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1waG90by1jbG9zZVwiKTtcclxuXHJcbmZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVzLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHMvXCIse1xyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IFwiYWNhNDEwNTMtOTM1Zi00OTgwLWFiN2UtNDFhZjZlZWE0NjMxXCJcclxuICAgIH1cclxufSlcclxuXHJcbmxldCBzZWN0aW9uID0gbnVsbFxyXG5cclxuLy8gY29uc3Qgc2VjdGlvbiAgPSBuZXcgU2VjdGlvbih7XHJcbi8vICAgICBpdGVtczogaW5pdGlhbENhcmRzLCBcclxuLy8gICAgIHJlbmRlcmVyOiBmdW5jdGlvbiAoaXRlbSl7XHJcbi8vICAgICAgICAgY29uc3QgaW5pdGlhbENhcmQgPSBuZXcgQ2FyZChpdGVtLm5hbWUsIGl0ZW0ubGluaywgKCkgPT4ge3BvcHVwSW1hZ2Uub3Blbih7bmFtZTogaXRlbS5uYW1lLCBsaW5rOiBpdGVtLmxpbmt9KTt9ICkuY3JlYXRlQ2FyZCgpO1xyXG4vLyAgICAgICAgIHNlY3Rpb24uYWRkSXRlbShpbml0aWFsQ2FyZCk7XHJcbi8vICAgICB9XHJcbi8vIH0sICcuZWxlbWVudCcpO1xyXG5cclxuLy8gc2VjdGlvbi5yZW5kZXJJdGVtcygpOyAgICBcclxuXHJcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtIChcIiNwb3B1cC1wcm9maWxlXCIsIChpbnB1dHMpID0+IHtcclxuICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gaW5wdXRzLm5hbWU7XHJcbiAgICBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSBpbnB1dHMuYWJvdXQ7XHJcbn0pO1xyXG5cclxucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cENhcmRzID0gbmV3IFBvcHVwV2l0aEZvcm0gKFwiI3BvcHVwLWNhcmRzXCIsIChpbnB1dHMpID0+IHtcclxuICAgIGNvbnN0IGluaXRpYWxDYXJkID0gbmV3IENhcmQoaW5wdXRzLnRpdGxlLCBpbnB1dHMubGluaywgKCk9PiB7IHBvcHVwSW1hZ2Uub3Blbih7IG5hbWU6IGlucHV0cy50aXRsZSwgbGluazogaW5wdXRzLmxpbmsgfSk7fSkuY3JlYXRlQ2FyZCgpO1xyXG4gICAgY2FyZEFyZWEucHJlcGVuZChpbml0aWFsQ2FyZCk7XHJcbn0pO1xyXG5cclxucG9wdXBDYXJkcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSAoXCIjcG9wdXAtcGhvdG9cIik7XHJcblxyXG5wcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1cFByb2ZpbGUub3BlbigpO1xyXG59KTtcclxuXHJcbmNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVwQ2FyZHMub3BlbigpO1xyXG59KTtcclxuXHJcbmZvcm1DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdXBQcm9maWxlLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuY2FyZENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1cENhcmRzLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuYnV0dG9uQ2xvc2VQb3B1cFBob3RvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1cENhcmRzLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycyggKTtcclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9fY29udGVudC1pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19jb250ZW50LWlucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGlucHV0RXJyb3JNZXNzYWdlQ2xhc3M6IFwiZm9ybV9fZXJyb3ItbWVzc2FnZVwiLFxyXG59O1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1Qcm9maWxlKTtcclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBjYXJkc0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1DYXJkKTtcclxuY2FyZHNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsiXSwibmFtZXMiOlsidGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJDYXJkIiwibmFtZSIsImxpbmsiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZCIsIl9nZXRUZW1wbGF0ZSIsImtleSIsInZhbHVlIiwiY2xvbmVOb2RlIiwiY29udGVudCIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2xpa2VCdXR0b24iLCJfZGVsZXRlQnV0dG9uIiwic3JjIiwidGV4dENvbnRlbnQiLCJhbHQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlbGlrZUNhcmQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9zZXRQcm9wZXJ0aWVzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsImNvbnNvbGUiLCJsb2ciLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfaGFzSW52YWxpZElucHV0IiwiYWRkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yTWVzc2FnZUNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9jbG9zZUJ1dHRvbiIsImUiLCJjbG9zZSIsInRhcmdldCIsImNsYXNzTmFtZSIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2NhbGxTdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1CdXR0b24iLCJfaW5oZXJpdHMiLCJfdGhpczIiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJfc3VwZXJQcm9wR2V0IiwicmVzZXQiLCJfdGhpczMiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiX3RpdGxlIiwiX2ltYWdlIiwib3BlbiIsIl9yZWYiLCJmb3JtUHJvZmlsZSIsImZvcm1DbG9zZSIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwicHJvZmlsZUJ1dHRvbiIsImNhcmRBcmVhIiwiZm9ybUNhcmQiLCJjYXJkQnV0dG9uIiwiY2FyZENsb3NlIiwiYnV0dG9uQ2xvc2VQb3B1cFBob3RvIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInBvcHVwUHJvZmlsZSIsImlucHV0cyIsImFib3V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cENhcmRzIiwiaW5pdGlhbENhcmQiLCJ0aXRsZSIsInBvcHVwSW1hZ2UiLCJjcmVhdGVDYXJkIiwicHJlcGVuZCIsImZvcm1TZWxlY3RvciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9